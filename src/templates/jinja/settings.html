{% extends "templates/jinja/base.tpl" %}

{% block page_id %}settings-page{% endblock page_id %}

{% block main %}
<div class="col-md-9">
  <h1>Settings</h1>
  <h4 class="text-muted">Edit your profile</h4>
  <form class="form-horizontal" role="form">
    <div class="form-group">
      <label for="inputEmail1" class="col-lg-3 control-label">firdayfilmclub.com/u/</label>
      <div class="col-lg-9">
        <input type="email" class="form-control" id="inputEmail1" value="{{user.key.id()}}">
        <p class="help-block">Your public username.</p>
      </div>
    </div>
    <div class="form-group">
      <label for="inputEmail" class="col-lg-3 control-label">Email</label>
      <div class="col-lg-9">
        <input type="email" class="form-control" id="inputEmail" value="{{user.email}}">
        <p class="help-block">We need your email to send you the weekly question.</p>
      </div>
    </div>
    <div class="form-group">
      <label for="profilePic" class="col-lg-3 control-label">Profile pic</label>
      <div class="col-lg-9">
        <input type="file" id="profilePic">
        <p class="help-block">Max size 1MB</p>
      </div>
    </div>
    <div class="form-group">
      <div class="col-lg-offset-2 col-lg-10">
        <button type="submit" class="btn btn-primary pull-right">Save profile</button>
      </div>
    </div>
  </form>

  <h4 class="text-muted">Send invites</h4>
  <form class="form" id="invite-form">
    <div class="input-group">
      <input name="invite_email" type="text" class="invite-email form-control" id="inviteEmail" placeholder="Add a friends email address to invite them">
      <span class="input-group-btn">
        <button class="btn btn-default" type="submit">Send Invite</button>
      </span>
    </div>
    <p class="help-block">Enter a valid email. You have <span class="num-invites">{{ user.invites|length }}</span> invite{% if user.invites|length != 1 %}s{% endif %} left.<br><br></p>
  </form>

  <h4 class="text-muted">Link your accounts</h4>
  <ul class="list-group">
    <li class="list-group-item">
      Google
      {% if user.google_name %}
        <span class="glyphicon glyphicon-ok pull-right"></span>
      {% else %}
        <a href="/auth/google" class="btn btn-xs btn-default pull-right" type="button">
          <img src="/static/img/google.png">
          Add
        </a>
      {% endif %}
    </li>
    <li class="list-group-item">
      Facebook
      {% if user.facebook_name %}
        <span class="glyphicon glyphicon-ok pull-right"></span>
      {% else %}
        <a href="/auth/facebook" class="btn btn-xs btn-primary pull-right" type="button">
          <img src="/static/img/facebook.png">
          Add
        </a>
      {% endif %}
    </li>
    <li class="list-group-item">
      Twitter
      {% if user.twitter_name %}
        <span class="glyphicon glyphicon-ok pull-right"></span>
      {% else %}
        <a href="/auth/twitter" class="btn btn-xs btn-info pull-right" type="button">
          <img src="/static/img/twitter.png">
          Add
        </a>
      {% endif %}
    </li>
  </ul>
</div>
{% endblock %}

{% block sidebar %}
<div class="col-md-3" id="sidebar">
  <img src="{{ user.pic_url() }}" style="width: 100%">
</div>
{% endblock %}

{% block body_base %}
{% if debug %}
  <script src="/closure-library/closure/goog/base.js"></script>
  <script src="/static/js/deps.js"></script>
  <script>
    goog.require('goog.ui.Component');
    goog.require('ffc.settings.InviteForm');
  </script>
{% else %}
  <script src="/static/js/settings.js"></script>
{% endif %}
<script>

  var inviteForm = new ffc.settings.InviteForm();
  inviteForm.decorate(document.getElementById('invite-form'));

</script>
{% endblock %}


