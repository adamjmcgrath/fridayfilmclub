{% extends "templates/jinja/base.tpl" %}

{% set page_id = 'addeditleague-page' %}

{% block page_id %}{{ page_id }}{% endblock page_id %}

{% block content %}
<div class="col-md-12">
  <h1>{% if league %}Edit{% else %}Add{% endif %} a League</h1>
  <p class="intro">Fill in the details and hit save.</p>

  <form class="form clearfix" id="user-settings-form" action="" method="post" enctype="multipart/form-data">

    <div class="form-group">
      <label for="name" class="control-label">Name</label>
      <input class="form-control" id="name" name="name" type="text" value="{{ league_name }}" />
      <p class="help-block">The name of your league.</p>
    </div>

    <div class="form-group">
      <label for="pic" class="control-label">Picture</label>
      {% if league_pic %}
        <p>{{ league_pic }}</p>
      {% endif %} 
      <input class="form-control" id="pic" name="pic" type="file" />
      <p class="help-block">Max size 1MB</p>
    </div>

    <div class="form-group">
      <label for="usersearch" class="control-label">Users</label>
      <div class="input-group">
          <input type="text" class="form-control" id="usersearch" placeholder="Search for a user&hellip;">
          <span class="input-group-btn">
              <button type="button" class="btn btn-default">Add user</button>
          </span>
      </div>
      <p class="help-block">Add users to your league.</p>
    </div>

    <div id="usersTable">
      <table class="table table-striped table-hover">
        <tr>
          <th>Users</th>
        </tr>
        <tbody class="league-users">
        {% for user in users %}
          <tr>
            <td>{{ user.username }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="form-group">
      <input type="hidden" name="users" id="users">
      <input type="hidden" id="selectedUser">
      <button type="submit" class="btn btn-primary pull-right">Save league</button>
    </div>
  </form>
</div>
{% endblock %}

{% block sidebar %}
<div class="col-md-3" id="sidebar">

</div>
{% endblock %}


{% block body_base %}
{% if debug %}
  <script src="/closure-library/closure/goog/base.js"></script>
  <script src="/static/js/deps.js"></script>
  <script>
    goog.require('goog.ui.Component');
    goog.require('ffc.usersuggest.AutoComplete');
  </script>
{% else %}
{#  <script src="/static/js/settings.js"></script>#}
{% endif %}
<script>
  (function() {
    // Find users auto complete
    var userSearch = document.getElementById('usersearch');
    var selectedUser = document.getElementById('selectedUser');
    var ac = new ffc.usersuggest.AutoComplete(
        userSearch, userSearch.parentNode.parentNode, selectedUser);
  })();
</script>
{% endblock %}
